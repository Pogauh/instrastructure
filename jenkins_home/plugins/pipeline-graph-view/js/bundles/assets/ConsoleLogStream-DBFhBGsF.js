import{H as E,j,r as le,R as Zo}from"./PipelineGraphModel-Mn0pZxmn.js";import{g as Jo}from"./PipelineGraph-CAd07jJ9.js";const xt=0,ke=1,_e=2,xo=4;function Xt(e){return()=>e}function Qo(e){e()}function vo(e,t){return o=>e(t(o))}function Zt(e,t){return()=>e(t)}function en(e,t){return o=>e(t,o)}function Ft(e){return e!==void 0}function tn(...e){return()=>{e.map(Qo)}}function Ue(){}function vt(e,t){return t(e),e}function on(e,t){return t(e)}function X(...e){return e}function U(e,t){return e(ke,t)}function A(e,t){e(xt,t)}function Mt(e){e(_e)}function oe(e){return e(xo)}function k(e,t){return U(e,en(t,xt))}function be(e,t){const o=e(ke,n=>{o(),t(n)});return o}function Jt(e){let t,o;return n=>r=>{t=r,o&&clearTimeout(o),o=setTimeout(()=>{n(t)},e)}}function Io(e,t){return e===t}function Y(e=Io){let t;return o=>n=>{e(t,n)||(t=n,o(n))}}function M(e){return t=>o=>{e(o)&&t(o)}}function R(e){return t=>vo(t,e)}function we(e){return t=>()=>{t(e)}}function x(e,...t){const o=nn(...t);return(n,r)=>{switch(n){case _e:Mt(e);return;case ke:return U(e,o(r))}}}function Ce(e,t){return o=>n=>{o(t=e(t,n))}}function $e(e){return t=>o=>{e>0?e--:t(o)}}function Ee(e){let t=null,o;return n=>r=>{t=r,!o&&(o=setTimeout(()=>{o=void 0,n(t)},e))}}function G(...e){const t=new Array(e.length);let o=0,n=null;const r=Math.pow(2,e.length)-1;return e.forEach((i,l)=>{const s=Math.pow(2,l);U(i,a=>{const c=o;o=o|s,t[l]=a,c!==r&&o===r&&n&&(n(),n=null)})}),i=>l=>{const s=()=>{i([l].concat(t))};o===r?s():n=s}}function nn(...e){return t=>e.reduceRight(on,t)}function rn(e){let t,o;const n=()=>t==null?void 0:t();return function(r,i){switch(r){case ke:return i?o===i?void 0:(n(),o=i,t=U(e,i),t):(n(),Ue);case _e:n(),o=null;return}}}function T(e){let t=e;const o=N();return(n,r)=>{switch(n){case xt:t=r;break;case ke:{r(t);break}case xo:return t}return o(n,r)}}function se(e,t){return vt(T(t),o=>k(e,o))}function N(){const e=[];return(t,o)=>{switch(t){case xt:e.slice().forEach(n=>{n(o)});return;case _e:e.splice(0,e.length);return;case ke:return e.push(o),()=>{const n=e.indexOf(o);n>-1&&e.splice(n,1)}}}}function he(e){return vt(N(),t=>k(e,t))}function V(e,t=[],{singleton:o}={singleton:!0}){return{constructor:e,dependencies:t,id:ln(),singleton:o}}const ln=()=>Symbol();function sn(e){const t=new Map,o=({constructor:n,dependencies:r,id:i,singleton:l})=>{if(l&&t.has(i))return t.get(i);const s=n(r.map(a=>o(a)));return l&&t.set(i,s),s};return o(e)}function te(...e){const t=N(),o=new Array(e.length);let n=0;const r=Math.pow(2,e.length)-1;return e.forEach((i,l)=>{const s=Math.pow(2,l);U(i,a=>{o[l]=a,n=n|s,n===r&&A(t,o)})}),function(i,l){switch(i){case _e:{Mt(t);return}case ke:return n===r&&l(o),U(t,l)}}}function O(e,t=Io){return x(e,Y(t))}function Qt(...e){return function(t,o){switch(t){case _e:return;case ke:return tn(...e.map(n=>U(n,o)))}}}var de=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(de||{});const cn={0:"debug",3:"error",1:"log",2:"warn"},an=()=>typeof globalThis>"u"?window:globalThis,Le=V(()=>{const e=T(3);return{log:T((t,o,n=1)=>{var r;const i=(r=an().VIRTUOSO_LOG_LEVEL)!=null?r:oe(e);n>=i&&console[cn[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,o)}),logLevel:e}},[],{singleton:!0});function Pe(e,t,o){return Ot(e,t,o).callbackRef}function Ot(e,t,o){const n=E.useRef(null);let r=l=>{};const i=E.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{const s=()=>{const a=l[0].target;a.offsetParent!==null&&e(a)};o?s():requestAnimationFrame(s)}):null,[e,o]);return r=l=>{l&&t?(i==null||i.observe(l),n.current=l):(n.current&&(i==null||i.unobserve(n.current)),n.current=null)},{callbackRef:r,ref:n}}function un(e,t,o,n,r,i,l,s,a){const c=E.useCallback(h=>{const v=dn(h.children,t,s?"offsetWidth":"offsetHeight",r);let g=h.parentElement;for(;!g.dataset.virtuosoScroller;)g=g.parentElement;const p=g.lastElementChild.dataset.viewportType==="window";let H;p&&(H=g.ownerDocument.defaultView);const b=l?s?l.scrollLeft:l.scrollTop:p?s?H.scrollX||H.document.documentElement.scrollLeft:H.scrollY||H.document.documentElement.scrollTop:s?g.scrollLeft:g.scrollTop,m=l?s?l.scrollWidth:l.scrollHeight:p?s?H.document.documentElement.scrollWidth:H.document.documentElement.scrollHeight:s?g.scrollWidth:g.scrollHeight,d=l?s?l.offsetWidth:l.offsetHeight:p?s?H.innerWidth:H.innerHeight:s?g.offsetWidth:g.offsetHeight;n({scrollHeight:m,scrollTop:Math.max(b,0),viewportHeight:d}),i==null||i(s?eo("column-gap",getComputedStyle(h).columnGap,r):eo("row-gap",getComputedStyle(h).rowGap,r)),v!==null&&e(v)},[e,t,r,i,l,n,s]);return Ot(c,o,a)}function dn(e,t,o,n){const r=e.length;if(r===0)return null;const i=[];for(let l=0;l<r;l++){const s=e.item(l);if(s.dataset.index===void 0)continue;const a=parseInt(s.dataset.index),c=parseFloat(s.dataset.knownSize),h=t(s,o);if(h===0&&n("Zero-sized element, this should not happen",{child:s},de.ERROR),h===c)continue;const v=i[i.length-1];i.length===0||v.size!==h||v.endIndex!==a-1?i.push({endIndex:a,size:h,startIndex:a}):i[i.length-1].endIndex++}return i}function eo(e,t,o){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&o(`${e} was not resolved to pixel value correctly`,t,de.WARN),t==="normal"?0:parseInt(t??"0",10)}function To(e,t,o){const n=E.useRef(null),r=E.useCallback(a=>{if(!(a!=null&&a.offsetParent))return;const c=a.getBoundingClientRect(),h=c.width;let v,g;if(t){const p=t.getBoundingClientRect(),H=c.top-p.top;g=p.height-Math.max(0,H),v=H+t.scrollTop}else{const p=l.current.ownerDocument.defaultView;g=p.innerHeight-Math.max(0,c.top),v=c.top+p.scrollY}n.current={offsetTop:v,visibleHeight:g,visibleWidth:h},e(n.current)},[e,t]),{callbackRef:i,ref:l}=Ot(r,!0,o),s=E.useCallback(()=>{r(l.current)},[r,l]);return E.useEffect(()=>{var a;if(t){t.addEventListener("scroll",s);const c=new ResizeObserver(()=>{requestAnimationFrame(s)});return c.observe(t),()=>{t.removeEventListener("scroll",s),c.unobserve(t)}}else{const c=(a=l.current)==null?void 0:a.ownerDocument.defaultView;return c==null||c.addEventListener("scroll",s),c==null||c.addEventListener("resize",s),()=>{c==null||c.removeEventListener("scroll",s),c==null||c.removeEventListener("resize",s)}}},[s,t,l]),i}const ae=V(()=>{const e=N(),t=N(),o=T(0),n=N(),r=T(0),i=N(),l=N(),s=T(0),a=T(0),c=T(0),h=T(0),v=N(),g=N(),p=T(!1),H=T(!1),b=T(!1);return k(x(e,R(({scrollTop:m})=>m)),t),k(x(e,R(({scrollHeight:m})=>m)),l),k(t,r),{deviation:o,fixedFooterHeight:c,fixedHeaderHeight:a,footerHeight:h,headerHeight:s,horizontalDirection:H,scrollBy:g,scrollContainerState:e,scrollHeight:l,scrollingInProgress:p,scrollTo:v,scrollTop:t,skipAnimationFrameInResizeObserver:b,smoothScrollTargetReached:n,statefulScrollTop:r,viewportHeight:i}},[],{singleton:!0}),Je={lvl:0};function So(e,t){const o=e.length;if(o===0)return[];let{index:n,value:r}=t(e[0]);const i=[];for(let l=1;l<o;l++){const{index:s,value:a}=t(e[l]);i.push({end:s-1,start:n,value:r}),n=s,r=a}return i.push({end:1/0,start:n,value:r}),i}function q(e){return e===Je}function Qe(e,t){if(!q(e))return t===e.k?e.v:t<e.k?Qe(e.l,t):Qe(e.r,t)}function Te(e,t,o="k"){if(q(e))return[-1/0,void 0];if(Number(e[o])===t)return[e.k,e.v];if(Number(e[o])<t){const n=Te(e.r,t,o);return n[0]===-1/0?[e.k,e.v]:n}return Te(e.l,t,o)}function fe(e,t,o){return q(e)?bo(t,o,1):t===e.k?ee(e,{k:t,v:o}):t<e.k?to(ee(e,{l:fe(e.l,t,o)})):to(ee(e,{r:fe(e.r,t,o)}))}function Ve(){return Je}function It(e,t,o){if(q(e))return[];const n=Te(e,t)[0];return fn(Et(e,n,o))}function zt(e,t){if(q(e))return Je;const{k:o,l:n,r}=e;if(t===o){if(q(n))return r;if(q(r))return n;{const[i,l]=Co(n);return dt(ee(e,{k:i,l:wo(n),v:l}))}}else return t<o?dt(ee(e,{l:zt(n,t)})):dt(ee(e,{r:zt(r,t)}))}function je(e){return q(e)?[]:[...je(e.l),{k:e.k,v:e.v},...je(e.r)]}function Et(e,t,o){if(q(e))return[];const{k:n,l:r,r:i,v:l}=e;let s=[];return n>t&&(s=s.concat(Et(r,t,o))),n>=t&&n<=o&&s.push({k:n,v:l}),n<=o&&(s=s.concat(Et(i,t,o))),s}function dt(e){const{l:t,lvl:o,r:n}=e;if(n.lvl>=o-1&&t.lvl>=o-1)return e;if(o>n.lvl+1){if(Ct(t))return Ho(ee(e,{lvl:o-1}));if(!q(t)&&!q(t.r))return ee(t.r,{l:ee(t,{r:t.r.l}),lvl:o,r:ee(e,{l:t.r.r,lvl:o-1})});throw new Error("Unexpected empty nodes")}else{if(Ct(e))return Bt(ee(e,{lvl:o-1}));if(!q(n)&&!q(n.l)){const r=n.l,i=Ct(r)?n.lvl-1:n.lvl;return ee(r,{l:ee(e,{lvl:o-1,r:r.l}),lvl:r.lvl+1,r:Bt(ee(n,{l:r.r,lvl:i}))})}else throw new Error("Unexpected empty nodes")}}function ee(e,t){return bo(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function wo(e){return q(e.r)?e.l:dt(ee(e,{r:wo(e.r)}))}function Ct(e){return q(e)||e.lvl>e.r.lvl}function Co(e){return q(e.r)?[e.k,e.v]:Co(e.r)}function bo(e,t,o,n=Je,r=Je){return{k:e,l:n,lvl:o,r,v:t}}function to(e){return Bt(Ho(e))}function Ho(e){const{l:t}=e;return!q(t)&&t.lvl===e.lvl?ee(t,{r:ee(e,{l:t.r})}):e}function Bt(e){const{lvl:t,r:o}=e;return!q(o)&&!q(o.r)&&o.lvl===t&&o.r.lvl===t?ee(o,{l:ee(e,{r:o.l}),lvl:t+1}):e}function fn(e){return So(e,({k:t,v:o})=>({index:t,value:o}))}function Ro(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function et(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const Wt=V(()=>({recalcInProgress:T(!1)}),[],{singleton:!0});function yo(e,t,o){return e[ht(e,t,o)]}function ht(e,t,o,n=0){let r=e.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),l=e[i],s=o(l,t);if(s===0)return i;if(s===-1){if(r-n<2)return i-1;r=i-1}else{if(r===n)return i;n=i+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function hn(e,t,o,n){const r=ht(e,t,n),i=ht(e,o,n,r);return e.slice(r,i+1)}function Be(e,t){return Math.round(e.getBoundingClientRect()[t])}function Tt(e){return!q(e.groupOffsetTree)}function jt({index:e},t){return t===e?0:t<e?-1:1}function mn(){return{groupIndices:[],groupOffsetTree:Ve(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Ve()}}function gn(e,t){let o=q(e)?0:1/0;for(const n of t){const{endIndex:r,size:i,startIndex:l}=n;if(o=Math.min(o,l),q(e)){e=fe(e,0,i);continue}const s=It(e,l-1,r+1);if(s.some(wn(n)))continue;let a=!1,c=!1;for(const{end:h,start:v,value:g}of s)a?(r>=v||i===g)&&(e=zt(e,v)):(c=g!==i,a=!0),h>r&&r>=v&&g!==i&&(e=fe(e,r+1,g));c&&(e=fe(e,l,i))}return[e,o]}function pn(e){return typeof e.groupIndex<"u"}function xn({offset:e},t){return t===e?0:t<e?-1:1}function tt(e,t,o){if(t.length===0)return 0;const{index:n,offset:r,size:i}=yo(t,e,jt),l=e-n,s=i*l+(l-1)*o+r;return s>0?s+o:s}function zo(e,t){if(!Tt(t))return e;let o=0;for(;t.groupIndices[o]<=e+o;)o++;return e+o}function Eo(e,t,o){if(pn(e))return t.groupIndices[e.groupIndex]+1;{const n=e.index==="LAST"?o:e.index;let r=zo(n,t);return r=Math.max(0,r,Math.min(o,r)),r}}function vn(e,t,o,n=0){return n>0&&(t=Math.max(t,yo(e,n,jt).offset)),So(hn(e,t,o,xn),Sn)}function In(e,[t,o,n,r]){t.length>0&&n("received item sizes",t,de.DEBUG);const i=e.sizeTree;let l=i,s=0;if(o.length>0&&q(i)&&t.length===2){const g=t[0].size,p=t[1].size;l=o.reduce((H,b)=>fe(fe(H,b,g),b+1,p),l)}else[l,s]=gn(l,t);if(l===i)return e;const{lastIndex:a,lastOffset:c,lastSize:h,offsetTree:v}=kt(e.offsetTree,s,l,r);return{groupIndices:o,groupOffsetTree:o.reduce((g,p)=>fe(g,p,tt(p,v,r)),Ve()),lastIndex:a,lastOffset:c,lastSize:h,offsetTree:v,sizeTree:l}}function Tn(e){return je(e).map(({k:t,v:o},n,r)=>{const i=r[n+1];return{endIndex:i?i.k-1:1/0,size:o,startIndex:t}})}function oo(e,t){let o=0,n=0;for(;o<e;)o+=t[n+1]-t[n]-1,n++;return n-(o===e?0:1)}function kt(e,t,o,n){let r=e,i=0,l=0,s=0,a=0;if(t!==0){a=ht(r,t-1,jt),s=r[a].offset;const c=Te(o,t-1);i=c[0],l=c[1],r.length&&r[a].size===Te(o,t)[1]&&(a-=1),r=r.slice(0,a+1)}else r=[];for(const{start:c,value:h}of It(o,t,1/0)){const v=c-i,g=v*l+s+v*n;r.push({index:c,offset:g,size:h}),i=c,s=g,l=h}return{lastIndex:i,lastOffset:s,lastSize:l,offsetTree:r}}function Sn(e){return{index:e.index,value:e}}function wn(e){const{endIndex:t,size:o,startIndex:n}=e;return r=>r.start===n&&(r.end===t||r.end===1/0)&&r.value===o}const Cn={offsetHeight:"height",offsetWidth:"width"},He=V(([{log:e},{recalcInProgress:t}])=>{const o=N(),n=N(),r=se(n,0),i=N(),l=N(),s=T(0),a=T([]),c=T(void 0),h=T(void 0),v=T((I,f)=>Be(I,Cn[f])),g=T(void 0),p=T(0),H=mn(),b=se(x(o,G(a,e,p),Ce(In,H),Y()),H),m=se(x(a,Y(),Ce((I,f)=>({current:f,prev:I.current}),{current:[],prev:[]}),R(({prev:I})=>I)),[]);k(x(a,M(I=>I.length>0),G(b,p),R(([I,f,C])=>{const y=I.reduce((L,F,P)=>fe(L,F,tt(F,f.offsetTree,C)||P),Ve());return{...f,groupIndices:I,groupOffsetTree:y}})),b),k(x(n,G(b),M(([I,{lastIndex:f}])=>I<f),R(([I,{lastIndex:f,lastSize:C}])=>[{endIndex:f,size:C,startIndex:I}])),o),k(c,h);const d=se(x(c,R(I=>I===void 0)),!0);k(x(h,M(I=>I!==void 0&&q(oe(b).sizeTree)),R(I=>[{endIndex:0,size:I,startIndex:0}])),o);const u=he(x(o,G(b),Ce(({sizes:I},[f,C])=>({changed:C!==I,sizes:C}),{changed:!1,sizes:H}),R(I=>I.changed)));U(x(s,Ce((I,f)=>({diff:I.prev-f,prev:f}),{diff:0,prev:0}),R(I=>I.diff)),I=>{const{groupIndices:f}=oe(b);if(I>0)A(t,!0),A(i,I+oo(I,f));else if(I<0){const C=oe(m);C.length>0&&(I-=oo(-I,C)),A(l,I)}}),U(x(s,G(e)),([I,f])=>{I<0&&f("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},de.ERROR)});const w=he(i);k(x(i,G(b),R(([I,f])=>{const C=f.groupIndices.length>0,y=[],L=f.lastSize;if(C){const F=Qe(f.sizeTree,0);let P=0,$=0;for(;P<I;){const B=f.groupIndices[$],_=f.groupIndices.length===$+1?1/0:f.groupIndices[$+1]-B-1;y.push({endIndex:B,size:F,startIndex:B}),y.push({endIndex:B+1+_-1,size:L,startIndex:B+1}),$++,P+=_+1}const K=je(f.sizeTree);return P!==I&&K.shift(),K.reduce((B,{k:_,v:ne})=>{let me=B.ranges;return B.prevSize!==0&&(me=[...B.ranges,{endIndex:_+I-1,size:B.prevSize,startIndex:B.prevIndex}]),{prevIndex:_+I,prevSize:ne,ranges:me}},{prevIndex:I,prevSize:0,ranges:y}).ranges}return je(f.sizeTree).reduce((F,{k:P,v:$})=>({prevIndex:P+I,prevSize:$,ranges:[...F.ranges,{endIndex:P+I-1,size:F.prevSize,startIndex:F.prevIndex}]}),{prevIndex:0,prevSize:L,ranges:[]}).ranges})),o);const z=he(x(l,G(b,p),R(([I,{offsetTree:f},C])=>{const y=-I;return tt(y,f,C)})));return k(x(l,G(b,p),R(([I,f,C])=>{if(f.groupIndices.length>0){if(q(f.sizeTree))return f;let y=Ve();const L=oe(m);let F=0,P=0,$=0;for(;F<-I;){$=L[P];const K=L[P+1]-$-1;P++,F+=K+1}if(y=je(f.sizeTree).reduce((K,{k:B,v:_})=>fe(K,Math.max(0,B+I),_),y),F!==-I){const K=Qe(f.sizeTree,$);y=fe(y,0,K);const B=Te(f.sizeTree,-I+1)[1];y=fe(y,1,B)}return{...f,sizeTree:y,...kt(f.offsetTree,0,y,C)}}else{const y=je(f.sizeTree).reduce((L,{k:F,v:P})=>fe(L,Math.max(0,F+I),P),Ve());return{...f,sizeTree:y,...kt(f.offsetTree,0,y,C)}}})),b),{beforeUnshiftWith:w,data:g,defaultItemSize:h,firstItemIndex:s,fixedItemSize:c,gap:p,groupIndices:a,itemSize:v,listRefresh:u,shiftWith:l,shiftWithOffset:z,sizeRanges:o,sizes:b,statefulTotalCount:r,totalCount:n,trackItemSizes:d,unshiftWith:i}},X(Le,Wt),{singleton:!0});function bn(e){return e.reduce((t,o)=>(t.groupIndices.push(t.totalCount),t.totalCount+=o+1,t),{groupIndices:[],totalCount:0})}const Bo=V(([{groupIndices:e,sizes:t,totalCount:o},{headerHeight:n,scrollTop:r}])=>{const i=N(),l=N(),s=he(x(i,R(bn)));return k(x(s,R(a=>a.totalCount)),o),k(x(s,R(a=>a.groupIndices)),e),k(x(te(r,t,n),M(([a,c])=>Tt(c)),R(([a,c,h])=>Te(c.groupOffsetTree,Math.max(a-h,0),"v")[0]),Y(),R(a=>[a])),l),{groupCounts:i,topItemsIndexes:l}},X(He,ae)),Fe=V(([{log:e}])=>{const t=T(!1),o=he(x(t,M(n=>n),Y()));return U(t,n=>{n&&oe(e)("props updated",{},de.DEBUG)}),{didMount:o,propsReady:t}},X(Le),{singleton:!0}),Hn=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function ko(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!Hn)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const nt=V(([{gap:e,listRefresh:t,sizes:o,totalCount:n},{fixedFooterHeight:r,fixedHeaderHeight:i,footerHeight:l,headerHeight:s,scrollingInProgress:a,scrollTo:c,smoothScrollTargetReached:h,viewportHeight:v},{log:g}])=>{const p=N(),H=N(),b=T(0);let m=null,d=null,u=null;function w(){m&&(m(),m=null),u&&(u(),u=null),d&&(clearTimeout(d),d=null),A(a,!1)}return k(x(p,G(o,v,n,b,s,l,g),G(e,i,r),R(([[z,I,f,C,y,L,F,P],$,K,B])=>{const _=ko(z),{align:ne,behavior:me,offset:xe}=_,ve=C-1,ue=Eo(_,I,ve);let ce=tt(ue,I.offsetTree,$)+L;ne==="end"?(ce+=K+Te(I.sizeTree,ue)[1]-f+B,ue===ve&&(ce+=F)):ne==="center"?ce+=(K+Te(I.sizeTree,ue)[1]-f+B)/2:ce-=y,xe&&(ce+=xe);const Me=Ie=>{w(),Ie?(P("retrying to scroll to",{location:z},de.DEBUG),A(p,z)):(A(H,!0),P("list did not change, scroll successful",{},de.DEBUG))};if(w(),me==="smooth"){let Ie=!1;u=U(t,qe=>{Ie=Ie||qe}),m=be(h,()=>{Me(Ie)})}else m=be(x(t,Rn(150)),Me);return d=setTimeout(()=>{w()},1200),A(a,!0),P("scrolling from index to",{behavior:me,index:ue,top:ce},de.DEBUG),{behavior:me,top:ce}})),c),{scrollTargetReached:H,scrollToIndex:p,topListHeight:b}},X(He,ae,Le),{singleton:!0});function Rn(e){return t=>{const o=setTimeout(()=>{t(!1)},e);return n=>{n&&(t(!0),clearTimeout(o))}}}function Pt(e,t){e==0?t():requestAnimationFrame(()=>{Pt(e-1,t)})}function At(e,t){const o=t-1;return typeof e=="number"?e:e.index==="LAST"?o:e.index}const rt=V(([{defaultItemSize:e,listRefresh:t,sizes:o},{scrollTop:n},{scrollTargetReached:r,scrollToIndex:i},{didMount:l}])=>{const s=T(!0),a=T(0),c=T(!0);return k(x(l,G(a),M(([h,v])=>!!v),we(!1)),s),k(x(l,G(a),M(([h,v])=>!!v),we(!1)),c),U(x(te(t,l),G(s,o,e,c),M(([[,h],v,{sizeTree:g},p,H])=>h&&(!q(g)||Ft(p))&&!v&&!H),G(a)),([,h])=>{be(r,()=>{A(c,!0)}),Pt(4,()=>{be(n,()=>{A(s,!0)}),A(i,h)})}),{initialItemFinalLocationReached:c,initialTopMostItemIndex:a,scrolledToInitialItem:s}},X(He,ae,nt,Fe),{singleton:!0});function Lo(e,t){return Math.abs(e-t)<1.01}const ot="up",Xe="down",yn="none",zn={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},En=0,it=V(([{footerHeight:e,headerHeight:t,scrollBy:o,scrollContainerState:n,scrollTop:r,viewportHeight:i}])=>{const l=T(!1),s=T(!0),a=N(),c=N(),h=T(4),v=T(En),g=se(x(Qt(x(O(r),$e(1),we(!0)),x(O(r),$e(1),we(!1),Jt(100))),Y()),!1),p=se(x(Qt(x(o,we(!0)),x(o,we(!1),Jt(200))),Y()),!1);k(x(te(O(r),O(v)),R(([u,w])=>u<=w),Y()),s),k(x(s,Ee(50)),c);const H=he(x(te(n,O(i),O(t),O(e),O(h)),Ce((u,[{scrollHeight:w,scrollTop:z},I,f,C,y])=>{const L=z+I-w>-y,F={scrollHeight:w,scrollTop:z,viewportHeight:I};if(L){let $,K;return z>u.state.scrollTop?($="SCROLLED_DOWN",K=u.state.scrollTop-z):($="SIZE_DECREASED",K=u.state.scrollTop-z||u.scrollTopDelta),{atBottom:!0,atBottomBecause:$,scrollTopDelta:K,state:F}}let P;return F.scrollHeight>u.state.scrollHeight?P="SIZE_INCREASED":I<u.state.viewportHeight?P="VIEWPORT_HEIGHT_DECREASING":z<u.state.scrollTop?P="SCROLLING_UPWARDS":P="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:P,state:F}},zn),Y((u,w)=>u&&u.atBottom===w.atBottom))),b=se(x(n,Ce((u,{scrollHeight:w,scrollTop:z,viewportHeight:I})=>{if(Lo(u.scrollHeight,w))return{changed:!1,jump:0,scrollHeight:w,scrollTop:z};{const f=w-(z+I)<1;return u.scrollTop!==z&&f?{changed:!0,jump:u.scrollTop-z,scrollHeight:w,scrollTop:z}:{changed:!0,jump:0,scrollHeight:w,scrollTop:z}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),M(u=>u.changed),R(u=>u.jump)),0);k(x(H,R(u=>u.atBottom)),l),k(x(l,Ee(50)),a);const m=T(Xe);k(x(n,R(({scrollTop:u})=>u),Y(),Ce((u,w)=>oe(p)?{direction:u.direction,prevScrollTop:w}:{direction:w<u.prevScrollTop?ot:Xe,prevScrollTop:w},{direction:Xe,prevScrollTop:0}),R(u=>u.direction)),m),k(x(n,Ee(50),we(yn)),m);const d=T(0);return k(x(g,M(u=>!u),we(0)),d),k(x(r,Ee(100),G(g),M(([u,w])=>!!w),Ce(([u,w],[z])=>[w,z],[0,0]),R(([u,w])=>w-u)),d),{atBottomState:H,atBottomStateChange:a,atBottomThreshold:h,atTopStateChange:c,atTopThreshold:v,isAtBottom:l,isAtTop:s,isScrolling:g,lastJumpDueToItemResize:b,scrollDirection:m,scrollVelocity:d}},X(ae)),mt="top",gt="bottom",no="none";function ro(e,t,o){return typeof e=="number"?o===ot&&t===mt||o===Xe&&t===gt?e:0:o===ot?t===mt?e.main:e.reverse:t===gt?e.main:e.reverse}function io(e,t){var o;return typeof e=="number"?e:(o=e[t])!=null?o:0}const Gt=V(([{deviation:e,fixedHeaderHeight:t,headerHeight:o,scrollTop:n,viewportHeight:r}])=>{const i=N(),l=T(0),s=T(0),a=T(0),c=se(x(te(O(n),O(r),O(o),O(i,et),O(a),O(l),O(t),O(e),O(s)),R(([h,v,g,[p,H],b,m,d,u,w])=>{const z=h-u,I=m+d,f=Math.max(g-z,0);let C=no;const y=io(w,mt),L=io(w,gt);return p-=u,p+=g+d,H+=g+d,H-=u,p>h+I-y&&(C=ot),H<h-f+v+L&&(C=Xe),C!==no?[Math.max(z-g-ro(b,mt,C)-y,0),z-f-d+v+ro(b,gt,C)+L]:null}),M(h=>h!=null),Y(et)),[0,0]);return{increaseViewportBy:s,listBoundary:i,overscan:a,topListHeight:l,visibleRange:c}},X(ae),{singleton:!0});function Bn(e,t,o){if(Tt(t)){const n=zo(e,t);return[{index:Te(t.groupOffsetTree,n)[0],offset:0,size:0},{data:o==null?void 0:o[0],index:n,offset:0,size:0}]}return[{data:o==null?void 0:o[0],index:e,offset:0,size:0}]}const bt={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function ft(e,t,o,n,r,i){const{lastIndex:l,lastOffset:s,lastSize:a}=r;let c=0,h=0;if(e.length>0){c=e[0].offset;const b=e[e.length-1];h=b.offset+b.size}const v=o-l,g=s+v*a+(v-1)*n,p=c,H=g-h;return{bottom:h,firstItemIndex:i,items:lo(e,r,i),offsetBottom:H,offsetTop:c,top:p,topItems:lo(t,r,i),topListHeight:t.reduce((b,m)=>m.size+b,0),totalCount:o}}function Fo(e,t,o,n,r,i){let l=0;if(o.groupIndices.length>0)for(const h of o.groupIndices){if(h-l>=e)break;l++}const s=e+l,a=At(t,s),c=Array.from({length:s}).map((h,v)=>({data:i[v+a],index:v+a,offset:0,size:0}));return ft(c,[],s,r,o,n)}function lo(e,t,o){if(e.length===0)return[];if(!Tt(t))return e.map(c=>({...c,index:c.index+o,originalIndex:c.index}));const n=e[0].index,r=e[e.length-1].index,i=[],l=It(t.groupOffsetTree,n,r);let s,a=0;for(const c of e){(!s||s.end<c.index)&&(s=l.shift(),a=t.groupIndices.indexOf(s.start));let h;c.index===s.start?h={index:a,type:"group"}:h={groupIndex:a,index:c.index-(a+1)+o},i.push({...h,data:c.data,offset:c.offset,originalIndex:c.index,size:c.size})}return i}const Ae=V(([{data:e,firstItemIndex:t,gap:o,sizes:n,totalCount:r},i,{listBoundary:l,topListHeight:s,visibleRange:a},{initialTopMostItemIndex:c,scrolledToInitialItem:h},{topListHeight:v},g,{didMount:p},{recalcInProgress:H}])=>{const b=T([]),m=T(0),d=N();k(i.topItemsIndexes,b);const u=se(x(te(p,H,O(a,et),O(r),O(n),O(c),h,O(b),O(t),O(o),e),M(([f,C,,y,,,,,,,L])=>{const F=L&&L.length!==y;return f&&!C&&!F}),R(([,,[f,C],y,L,F,P,$,K,B,_])=>{const ne=L,{offsetTree:me,sizeTree:xe}=ne,ve=oe(m);if(y===0)return{...bt,totalCount:y};if(f===0&&C===0)return ve===0?{...bt,totalCount:y}:Fo(ve,F,L,K,B,_||[]);if(q(xe))return ve>0?null:ft(Bn(At(F,y),ne,_),[],y,B,ne,K);const ue=[];if($.length>0){const Ge=$[0],Se=$[$.length-1];let Re=0;for(const S of It(xe,Ge,Se)){const D=S.value,Z=Math.max(S.start,Ge),re=Math.min(S.end,Se);for(let Q=Z;Q<=re;Q++)ue.push({data:_==null?void 0:_[Q],index:Q,offset:Re,size:D}),Re+=D}}if(!P)return ft([],ue,y,B,ne,K);const ce=$.length>0?$[$.length-1]+1:0,Me=vn(me,f,C,ce);if(Me.length===0)return null;const Ie=y-1,qe=vt([],Ge=>{for(const Se of Me){const Re=Se.value;let S=Re.offset,D=Se.start;const Z=Re.size;if(Re.offset<f){D+=Math.floor((f-Re.offset+B)/(Z+B));const Q=D-Se.start;S+=Q*Z+Q*B}D<ce&&(S+=(ce-D)*Z,D=ce);const re=Math.min(Se.end,Ie);for(let Q=D;Q<=re&&!(S>=C);Q++)Ge.push({data:_==null?void 0:_[Q],index:Q,offset:S,size:Z}),S+=Z+B}});return ft(qe,ue,y,B,ne,K)}),M(f=>f!==null),Y()),bt);k(x(e,M(Ft),R(f=>f==null?void 0:f.length)),r),k(x(u,R(f=>f.topListHeight)),v),k(v,s),k(x(u,R(f=>[f.top,f.bottom])),l),k(x(u,R(f=>f.items)),d);const w=he(x(u,M(({items:f})=>f.length>0),G(r,e),M(([{items:f},C])=>f[f.length-1].originalIndex===C-1),R(([,f,C])=>[f-1,C]),Y(et),R(([f])=>f))),z=he(x(u,Ee(200),M(({items:f,topItems:C})=>f.length>0&&f[0].originalIndex===C.length),R(({items:f})=>f[0].index),Y())),I=he(x(u,M(({items:f})=>f.length>0),R(({items:f})=>{let C=0,y=f.length-1;for(;f[C].type==="group"&&C<y;)C++;for(;f[y].type==="group"&&y>C;)y--;return{endIndex:f[y].index,startIndex:f[C].index}}),Y(Ro)));return{endReached:w,initialItemCount:m,itemsRendered:d,listState:u,rangeChanged:I,startReached:z,topItemsIndexes:b,...g}},X(He,Bo,Gt,rt,nt,it,Fe,Wt),{singleton:!0}),Mo=V(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:o,headerHeight:n},{listState:r}])=>{const i=N(),l=se(x(te(o,e,n,t,r),R(([s,a,c,h,v])=>s+a+c+h+v.offsetBottom+v.bottom)),0);return k(O(l),i),{totalListHeight:l,totalListHeightChanged:i}},X(ae,Ae),{singleton:!0}),kn=V(([{viewportHeight:e},{totalListHeight:t}])=>{const o=T(!1),n=se(x(te(o,e,t),M(([r])=>r),R(([,r,i])=>Math.max(0,r-i)),Ee(0),Y()),0);return{alignToBottom:o,paddingTopAddition:n}},X(ae,Mo),{singleton:!0});function so(e){return e?e==="smooth"?"smooth":"auto":!1}const Ln=(e,t)=>typeof e=="function"?so(e(t)):t&&so(e),Fn=V(([{listRefresh:e,totalCount:t,fixedItemSize:o},{atBottomState:n,isAtBottom:r},{scrollToIndex:i},{scrolledToInitialItem:l},{didMount:s,propsReady:a},{log:c},{scrollingInProgress:h}])=>{const v=T(!1),g=N();let p=null;function H(m){A(i,{align:"end",behavior:m,index:"LAST"})}U(x(te(x(O(t),$e(1)),s),G(O(v),r,l,h),R(([[m,d],u,w,z,I])=>{let f=d&&z,C="auto";return f&&(C=Ln(u,w||I),f=f&&!!C),{followOutputBehavior:C,shouldFollow:f,totalCount:m}}),M(({shouldFollow:m})=>m)),({followOutputBehavior:m,totalCount:d})=>{p&&(p(),p=null),oe(o)?requestAnimationFrame(()=>{oe(c)("following output to ",{totalCount:d},de.DEBUG),H(m)}):p=be(e,()=>{oe(c)("following output to ",{totalCount:d},de.DEBUG),H(m),p=null})});function b(m){const d=be(n,u=>{m&&!u.atBottom&&u.notAtBottomBecause==="SIZE_INCREASED"&&!p&&(oe(c)("scrolling to bottom due to increased size",{},de.DEBUG),H("auto"))});setTimeout(d,100)}return U(x(te(O(v),t,a),M(([m,,d])=>m&&d),Ce(({value:m},[,d])=>({refreshed:m===d,value:d}),{refreshed:!1,value:0}),M(({refreshed:m})=>m),G(v,t)),([,m])=>{oe(l)&&b(m!==!1)}),U(g,()=>{b(oe(v)!==!1)}),U(te(O(v),n),([m,d])=>{m&&!d.atBottom&&d.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&H("auto")}),{autoscrollToBottom:g,followOutput:v}},X(He,it,nt,rt,Fe,Le,ae)),Mn=V(([{data:e,firstItemIndex:t,gap:o,sizes:n},{initialTopMostItemIndex:r},{initialItemCount:i,listState:l},{didMount:s}])=>(k(x(s,G(i),M(([,a])=>a!==0),G(r,n,t,o,e),R(([[,a],c,h,v,g,p=[]])=>Fo(a,c,h,v,g,p))),l),{}),X(He,rt,Ae,Fe),{singleton:!0}),On=V(([{didMount:e},{scrollTo:t},{listState:o}])=>{const n=T(0);return U(x(e,G(n),M(([,r])=>r!==0),R(([,r])=>({top:r}))),r=>{be(x(o,$e(1),M(i=>i.items.length>1)),()=>{requestAnimationFrame(()=>{A(t,r)})})}),{initialScrollTop:n}},X(Fe,ae,Ae),{singleton:!0}),Wn=({itemBottom:e,itemTop:t,locationParams:{align:o,behavior:n,...r},viewportBottom:i,viewportTop:l})=>t<l?{...r,align:o??"start",behavior:n}:e>i?{...r,align:o??"end",behavior:n}:null,jn=V(([{gap:e,sizes:t,totalCount:o},{fixedFooterHeight:n,fixedHeaderHeight:r,headerHeight:i,scrollingInProgress:l,scrollTop:s,viewportHeight:a},{scrollToIndex:c}])=>{const h=N();return k(x(h,G(t,a,o,i,r,n,s),G(e),R(([[v,g,p,H,b,m,d,u],w])=>{const{align:z,behavior:I,calculateViewLocation:f=Wn,done:C,...y}=v,L=Eo(v,g,H-1),F=tt(L,g.offsetTree,w)+b+m,P=F+Te(g.sizeTree,L)[1],$=u+m,K=u+p-d,B=f({itemBottom:P,itemTop:F,locationParams:{align:z,behavior:I,...y},viewportBottom:K,viewportTop:$});return B?C&&be(x(l,M(_=>!_),$e(oe(l)?1:2)),C):C&&C(),B}),M(v=>v!==null)),c),{scrollIntoView:h}},X(He,ae,nt,Ae,Le),{singleton:!0}),Oo=V(([{scrollVelocity:e}])=>{const t=T(!1),o=N(),n=T(!1);return k(x(e,G(n,t,o),M(([r,i])=>!!i),R(([r,i,l,s])=>{const{enter:a,exit:c}=i;if(l){if(c(r,s))return!1}else if(a(r,s))return!0;return l}),Y()),t),U(x(te(t,e,o),G(n)),([[r,i,l],s])=>{r&&s&&s.change&&s.change(i,l)}),{isSeeking:t,scrollSeekConfiguration:n,scrollSeekRangeChanged:o,scrollVelocity:e}},X(it),{singleton:!0}),Dt=V(([{scrollContainerState:e,scrollTo:t}])=>{const o=N(),n=N(),r=N(),i=T(!1),l=T(void 0);return k(x(te(o,n),R(([{scrollHeight:s,scrollTop:a,viewportHeight:c},{offsetTop:h}])=>({scrollHeight:s,scrollTop:Math.max(0,a-h),viewportHeight:c}))),e),k(x(t,G(n),R(([s,{offsetTop:a}])=>({...s,top:s.top+a}))),r),{customScrollParent:l,useWindowScroll:i,windowScrollContainerState:o,windowScrollTo:r,windowViewportRect:n}},X(ae)),Pn=V(([{sizeRanges:e,sizes:t},{headerHeight:o,scrollTop:n},{initialTopMostItemIndex:r},{didMount:i},{useWindowScroll:l,windowScrollContainerState:s,windowViewportRect:a}])=>{const c=N(),h=T(void 0),v=T(null),g=T(null);return k(s,v),k(a,g),U(x(c,G(t,n,l,v,g,o)),([p,H,b,m,d,u,w])=>{const z=Tn(H.sizeTree);m&&d!==null&&u!==null&&(b=d.scrollTop-u.offsetTop),b-=w,p({ranges:z,scrollTop:b})}),k(x(h,M(Ft),R(An)),r),k(x(i,G(h),M(([,p])=>p!==void 0),Y(),R(([,p])=>p.ranges)),e),{getState:c,restoreStateFrom:h}},X(He,ae,rt,Fe,Dt));function An(e){return{align:"start",index:0,offset:e.scrollTop}}const Gn=V(([{topItemsIndexes:e}])=>{const t=T(0);return k(x(t,M(o=>o>=0),R(o=>Array.from({length:o}).map((n,r)=>r))),e),{topItemCount:t}},X(Ae));function Wo(e){let t=!1,o;return()=>(t||(t=!0,o=e()),o)}const Dn=Wo(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),Nn=V(([{deviation:e,scrollBy:t,scrollingInProgress:o,scrollTop:n},{isAtBottom:r,isScrolling:i,lastJumpDueToItemResize:l,scrollDirection:s},{listState:a},{beforeUnshiftWith:c,gap:h,shiftWithOffset:v,sizes:g},{log:p},{recalcInProgress:H}])=>{const b=he(x(a,G(l),Ce(([,d,u,w],[{bottom:z,items:I,offsetBottom:f,totalCount:C},y])=>{const L=z+f;let F=0;return u===C&&d.length>0&&I.length>0&&(I[0].originalIndex===0&&d[0].originalIndex===0||(F=L-w,F!==0&&(F+=y))),[F,I,C,L]},[0,[],0,0]),M(([d])=>d!==0),G(n,s,o,r,p,H),M(([,d,u,w,,,z])=>!z&&!w&&d!==0&&u===ot),R(([[d],,,,,u])=>(u("Upward scrolling compensation",{amount:d},de.DEBUG),d))));function m(d){d>0?(A(t,{behavior:"auto",top:-d}),A(e,0)):(A(e,0),A(t,{behavior:"auto",top:-d}))}return U(x(b,G(e,i)),([d,u,w])=>{w&&Dn()?A(e,u-d):m(-d)}),U(x(te(se(i,!1),e,H),M(([d,u,w])=>!d&&!w&&u!==0),R(([d,u])=>u),Ee(1)),m),k(x(v,R(d=>({top:-d}))),t),U(x(c,G(g,h),R(([d,{groupIndices:u,lastSize:w,sizeTree:z},I])=>{function f(C){return C*(w+I)}if(u.length===0)return f(d);{let C=0;const y=Qe(z,0);let L=0,F=0;for(;L<d;){L++,C+=y;let P=u.length===F+1?1/0:u[F+1]-u[F]-1;L+P>d&&(C-=y,P=d-L+1),L+=P,C+=f(P),F++}return C}})),d=>{A(e,d),requestAnimationFrame(()=>{A(t,{top:d}),requestAnimationFrame(()=>{A(e,0),A(H,!1)})})}),{deviation:e}},X(ae,it,Ae,He,Le,Wt)),Vn=V(([e,t,o,n,r,i,l,s,a,c])=>({...e,...t,...o,...n,...r,...i,...l,...s,...a,...c}),X(Gt,Mn,Fe,Oo,Mo,On,kn,Dt,jn,Le)),jo=V(([{data:e,defaultItemSize:t,firstItemIndex:o,fixedItemSize:n,gap:r,groupIndices:i,itemSize:l,sizeRanges:s,sizes:a,statefulTotalCount:c,totalCount:h,trackItemSizes:v},{initialItemFinalLocationReached:g,initialTopMostItemIndex:p,scrolledToInitialItem:H},b,m,d,{listState:u,topItemsIndexes:w,...z},{scrollToIndex:I},f,{topItemCount:C},{groupCounts:y},L])=>(k(z.rangeChanged,L.scrollSeekRangeChanged),k(x(L.windowViewportRect,R(F=>F.visibleHeight)),b.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:o,fixedItemHeight:n,gap:r,groupCounts:y,initialItemFinalLocationReached:g,initialTopMostItemIndex:p,scrolledToInitialItem:H,sizeRanges:s,topItemCount:C,topItemsIndexes:w,totalCount:h,...d,groupIndices:i,itemSize:l,listState:u,scrollToIndex:I,statefulTotalCount:c,trackItemSizes:v,...z,...L,...b,sizes:a,...m}),X(He,rt,ae,Pn,Fn,Ae,nt,Nn,Gn,Bo,Vn));function $n(e,t){const o={},n={};let r=0;const i=e.length;for(;r<i;)n[e[r]]=1,r+=1;for(const l in t)Object.hasOwn(n,l)||(o[l]=t[l]);return o}const at=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Po(e,t,o){const n=Object.keys(t.required||{}),r=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),s=E.createContext({});function a(m,d){m.propsReady&&A(m.propsReady,!1);for(const u of n){const w=m[t.required[u]];A(w,d[u])}for(const u of r)if(u in d){const w=m[t.optional[u]];A(w,d[u])}m.propsReady&&A(m.propsReady,!0)}function c(m){return i.reduce((d,u)=>(d[u]=w=>{const z=m[t.methods[u]];A(z,w)},d),{})}function h(m){return l.reduce((d,u)=>(d[u]=rn(m[t.events[u]]),d),{})}const v=E.forwardRef((m,d)=>{const{children:u,...w}=m,[z]=E.useState(()=>vt(sn(e),C=>{a(C,w)})),[I]=E.useState(Zt(h,z));at(()=>{for(const C of l)C in w&&U(I[C],w[C]);return()=>{Object.values(I).map(Mt)}},[w,I,z]),at(()=>{a(z,w)}),E.useImperativeHandle(d,Xt(c(z)));const f=o;return j.jsx(s.Provider,{value:z,children:o?j.jsx(f,{...$n([...n,...r,...l],w),children:u}):u})}),g=m=>{const d=E.useContext(s);return E.useCallback(u=>{A(d[m],u)},[d,m])},p=m=>{const d=E.useContext(s)[m],u=E.useCallback(w=>U(d,w),[d]);return E.useSyncExternalStore(u,()=>oe(d),()=>oe(d))},H=m=>{const d=E.useContext(s)[m],[u,w]=E.useState(Zt(oe,d));return at(()=>U(d,z=>{z!==u&&w(Xt(z))}),[d,u]),u},b=E.version.startsWith("18")?p:H;return{Component:v,useEmitter:(m,d)=>{const u=E.useContext(s)[m];at(()=>U(u,d),[d,u])},useEmitterValue:b,usePublisher:g}}const Ao=E.createContext(void 0),Go=E.createContext(void 0),Do=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Ht(e){return"self"in e}function _n(e){return"body"in e}function No(e,t,o,n=Ue,r,i){const l=E.useRef(null),s=E.useRef(null),a=E.useRef(null),c=E.useCallback(g=>{let p,H,b;const m=g.target;if(_n(m)||Ht(m)){const u=Ht(m)?m:m.defaultView;b=i?u.scrollX:u.scrollY,p=i?u.document.documentElement.scrollWidth:u.document.documentElement.scrollHeight,H=i?u.innerWidth:u.innerHeight}else b=i?m.scrollLeft:m.scrollTop,p=i?m.scrollWidth:m.scrollHeight,H=i?m.offsetWidth:m.offsetHeight;const d=()=>{e({scrollHeight:p,scrollTop:Math.max(b,0),viewportHeight:H})};g.suppressFlushSync?d():Jo.flushSync(d),s.current!==null&&(b===s.current||b<=0||b===p-H)&&(s.current=null,t(!0),a.current&&(clearTimeout(a.current),a.current=null))},[e,t,i]);E.useEffect(()=>{const g=r||l.current;return n(r||l.current),c({suppressFlushSync:!0,target:g}),g.addEventListener("scroll",c,{passive:!0}),()=>{n(null),g.removeEventListener("scroll",c)}},[l,c,o,n,r]);function h(g){const p=l.current;if(!p||(i?"offsetWidth"in p&&p.offsetWidth===0:"offsetHeight"in p&&p.offsetHeight===0))return;const H=g.behavior==="smooth";let b,m,d;Ht(p)?(m=Math.max(Be(p.document.documentElement,i?"width":"height"),i?p.document.documentElement.scrollWidth:p.document.documentElement.scrollHeight),b=i?p.innerWidth:p.innerHeight,d=i?window.scrollX:window.scrollY):(m=p[i?"scrollWidth":"scrollHeight"],b=Be(p,i?"width":"height"),d=p[i?"scrollLeft":"scrollTop"]);const u=m-b;if(g.top=Math.ceil(Math.max(Math.min(u,g.top),0)),Lo(b,m)||g.top===d){e({scrollHeight:m,scrollTop:d,viewportHeight:b}),H&&t(!0);return}H?(s.current=g.top,a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{a.current=null,s.current=null,t(!0)},1e3)):s.current=null,i&&(g={behavior:g.behavior,left:g.top}),p.scrollTo(g)}function v(g){i&&(g={behavior:g.behavior,left:g.top}),l.current.scrollBy(g)}return{scrollByCallback:v,scrollerRef:l,scrollToCallback:h}}const Rt="-webkit-sticky",co="sticky",Vo=Wo(()=>{if(typeof document>"u")return co;const e=document.createElement("div");return e.style.position=Rt,e.style.position===Rt?Rt:co});function Nt(e){return e}const Un=V(()=>{const e=T(a=>`Item ${a}`),t=T(null),o=T(a=>`Group ${a}`),n=T({}),r=T(Nt),i=T("div"),l=T(Ue),s=(a,c=null)=>se(x(n,R(h=>h[a]),Y()),c);return{components:n,computeItemKey:r,context:t,EmptyPlaceholder:s("EmptyPlaceholder"),FooterComponent:s("Footer"),GroupComponent:s("Group","div"),groupContent:o,HeaderComponent:s("Header"),HeaderFooterTag:i,ItemComponent:s("Item","div"),itemContent:e,ListComponent:s("List","div"),ScrollerComponent:s("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),TopItemListComponent:s("TopItemList")}}),qn=V(([e,t])=>({...e,...t}),X(jo,Un)),Kn=({height:e})=>j.jsx("div",{style:{height:e}}),Yn={overflowAnchor:"none",position:Vo(),zIndex:1},$o={overflowAnchor:"none"},Xn={...$o,display:"inline-block",height:"100%"},ao=E.memo(function({showTopList:e=!1}){const t=W("listState"),o=ge("sizeRanges"),n=W("useWindowScroll"),r=W("customScrollParent"),i=ge("windowScrollContainerState"),l=ge("scrollContainerState"),s=r||n?i:l,a=W("itemContent"),c=W("context"),h=W("groupContent"),v=W("trackItemSizes"),g=W("itemSize"),p=W("log"),H=ge("gap"),b=W("horizontalDirection"),{callbackRef:m}=un(o,g,v,e?Ue:s,p,H,r,b,W("skipAnimationFrameInResizeObserver")),[d,u]=E.useState(0);Vt("deviation",B=>{d!==B&&u(B)});const w=W("EmptyPlaceholder"),z=W("ScrollSeekPlaceholder")||Kn,I=W("ListComponent"),f=W("ItemComponent"),C=W("GroupComponent"),y=W("computeItemKey"),L=W("isSeeking"),F=W("groupIndices").length>0,P=W("alignToBottom"),$=W("initialItemFinalLocationReached"),K=e?{}:{boxSizing:"border-box",...b?{display:"inline-block",height:"100%",marginLeft:d!==0?d:P?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:d!==0?d:P?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...$?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&w?j.jsx(w,{...ie(w,c)}):j.jsx(I,{...ie(I,c),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:m,style:K,children:(e?t.topItems:t.items).map(B=>{const _=B.originalIndex,ne=y(_+t.firstItemIndex,B.data,c);return L?le.createElement(z,{...ie(z,c),height:B.size,index:B.index,key:ne,type:B.type||"item",...B.type==="group"?{}:{groupIndex:B.groupIndex}}):B.type==="group"?le.createElement(C,{...ie(C,c),"data-index":_,"data-item-index":B.index,"data-known-size":B.size,key:ne,style:Yn},h(B.index,c)):le.createElement(f,{...ie(f,c),...er(f,B.data),"data-index":_,"data-item-group-index":B.groupIndex,"data-item-index":B.index,"data-known-size":B.size,key:ne,style:b?Xn:$o},F?a(B.index,B.groupIndex,B.data,c):a(B.index,B.data,c))})})}),Zn={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Jn={outline:"none",overflowX:"auto",position:"relative"},St=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),Qn={position:Vo(),top:0,width:"100%",zIndex:1};function ie(e,t){if(typeof e!="string")return{context:t}}function er(e,t){return{item:typeof e=="string"?void 0:t}}const tr=E.memo(function(){const e=W("HeaderComponent"),t=ge("headerHeight"),o=W("HeaderFooterTag"),n=Pe(E.useMemo(()=>i=>{t(Be(i,"height"))},[t]),!0,W("skipAnimationFrameInResizeObserver")),r=W("context");return e?j.jsx(o,{ref:n,children:j.jsx(e,{...ie(e,r)})}):null}),or=E.memo(function(){const e=W("FooterComponent"),t=ge("footerHeight"),o=W("HeaderFooterTag"),n=Pe(E.useMemo(()=>i=>{t(Be(i,"height"))},[t]),!0,W("skipAnimationFrameInResizeObserver")),r=W("context");return e?j.jsx(o,{ref:n,children:j.jsx(e,{...ie(e,r)})}):null});function _o({useEmitter:e,useEmitterValue:t,usePublisher:o}){return E.memo(function({children:n,style:r,...i}){const l=o("scrollContainerState"),s=t("ScrollerComponent"),a=o("smoothScrollTargetReached"),c=t("scrollerRef"),h=t("context"),v=t("horizontalDirection")||!1,{scrollByCallback:g,scrollerRef:p,scrollToCallback:H}=No(l,a,s,c,void 0,v);return e("scrollTo",H),e("scrollBy",g),j.jsx(s,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:p,style:{...v?Jn:Zn,...r},tabIndex:0,...i,...ie(s,h),children:n})})}function Uo({useEmitter:e,useEmitterValue:t,usePublisher:o}){return E.memo(function({children:n,style:r,...i}){const l=o("windowScrollContainerState"),s=t("ScrollerComponent"),a=o("smoothScrollTargetReached"),c=t("totalListHeight"),h=t("deviation"),v=t("customScrollParent"),g=t("context"),p=E.useRef(null),H=t("scrollerRef"),{scrollByCallback:b,scrollerRef:m,scrollToCallback:d}=No(l,a,s,H,v);return Do(()=>{var u;return m.current=v||((u=p.current)==null?void 0:u.ownerDocument.defaultView),()=>{m.current=null}},[m,v]),e("windowScrollTo",d),e("scrollBy",b),j.jsx(s,{ref:p,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...c!==0?{height:c+h}:{}},...i,...ie(s,g),children:n})})}const nr=({children:e})=>{const t=E.useContext(Ao),o=ge("viewportHeight"),n=ge("fixedItemHeight"),r=W("alignToBottom"),i=W("horizontalDirection"),l=E.useMemo(()=>vo(o,a=>Be(a,i?"width":"height")),[o,i]),s=Pe(l,!0,W("skipAnimationFrameInResizeObserver"));return E.useEffect(()=>{t&&(o(t.viewportHeight),n(t.itemHeight))},[t,o,n]),j.jsx("div",{"data-viewport-type":"element",ref:s,style:St(r),children:e})},rr=({children:e})=>{const t=E.useContext(Ao),o=ge("windowViewportRect"),n=ge("fixedItemHeight"),r=W("customScrollParent"),i=To(o,r,W("skipAnimationFrameInResizeObserver")),l=W("alignToBottom");return E.useEffect(()=>{t&&(n(t.itemHeight),o({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,o,n]),j.jsx("div",{"data-viewport-type":"window",ref:i,style:St(l),children:e})},ir=({children:e})=>{const t=W("TopItemListComponent")||"div",o=W("headerHeight"),n={...Qn,marginTop:`${o}px`},r=W("context");return j.jsx(t,{style:n,...ie(t,r),children:e})},lr=E.memo(function(e){const t=W("useWindowScroll"),o=W("topItemsIndexes").length>0,n=W("customScrollParent"),r=W("context"),i=n||t?ar:cr,l=n||t?rr:nr;return j.jsxs(i,{...e,...ie(i,r),children:[o&&j.jsx(ir,{children:j.jsx(ao,{showTopList:!0})}),j.jsxs(l,{children:[j.jsx(tr,{}),j.jsx(ao,{}),j.jsx(or,{})]})]})}),{Component:sr,useEmitter:Vt,useEmitterValue:W,usePublisher:ge}=Po(qn,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},lr),cr=_o({useEmitter:Vt,useEmitterValue:W,usePublisher:ge}),ar=Uo({useEmitter:Vt,useEmitterValue:W,usePublisher:ge}),ur=sr,dr=V(()=>{const e=T(a=>j.jsxs("td",{children:["Item $",a]})),t=T(null),o=T(null),n=T(null),r=T({}),i=T(Nt),l=T(Ue),s=(a,c=null)=>se(x(r,R(h=>h[a]),Y()),c);return{components:r,computeItemKey:i,context:t,EmptyPlaceholder:s("EmptyPlaceholder"),FillerRow:s("FillerRow"),fixedFooterContent:n,fixedHeaderContent:o,itemContent:e,ScrollerComponent:s("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),TableBodyComponent:s("TableBody","tbody"),TableComponent:s("Table","table"),TableFooterComponent:s("TableFoot","tfoot"),TableHeadComponent:s("TableHead","thead"),TableRowComponent:s("TableRow","tr")}});X(jo,dr);const uo={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},fr={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:fo,floor:pt,max:Ze,min:yt,round:ho}=Math;function mo(e,t,o){return Array.from({length:t-e+1}).map((n,r)=>({data:o===null?null:o[r+e],index:r+e}))}function hr(e){return{...fr,items:e}}function ut(e,t){return e&&e.width===t.width&&e.height===t.height}function mr(e,t){return e&&e.column===t.column&&e.row===t.row}const gr=V(([{increaseViewportBy:e,listBoundary:t,overscan:o,visibleRange:n},{footerHeight:r,headerHeight:i,scrollBy:l,scrollContainerState:s,scrollTo:a,scrollTop:c,smoothScrollTargetReached:h,viewportHeight:v},g,p,{didMount:H,propsReady:b},{customScrollParent:m,useWindowScroll:d,windowScrollContainerState:u,windowScrollTo:w,windowViewportRect:z},I])=>{const f=T(0),C=T(0),y=T(uo),L=T({height:0,width:0}),F=T({height:0,width:0}),P=N(),$=N(),K=T(0),B=T(null),_=T({column:0,row:0}),ne=N(),me=N(),xe=T(!1),ve=T(0),ue=T(!0),ce=T(!1),Me=T(!1);U(x(H,G(ve),M(([S,D])=>!!D)),()=>{A(ue,!1)}),U(x(te(H,ue,F,L,ve,ce),M(([S,D,Z,re,,Q])=>S&&!D&&Z.height!==0&&re.height!==0&&!Q)),([,,,,S])=>{A(ce,!0),Pt(1,()=>{A(P,S)}),be(x(c),()=>{A(t,[0,0]),A(ue,!0)})}),k(x(me,M(S=>S!=null&&S.scrollTop>0),we(0)),C),U(x(H,G(me),M(([,S])=>S!=null)),([,S])=>{S&&(A(L,S.viewport),A(F,S.item),A(_,S.gap),S.scrollTop>0&&(A(xe,!0),be(x(c,$e(1)),D=>{A(xe,!1)}),A(a,{top:S.scrollTop})))}),k(x(L,R(({height:S})=>S)),v),k(x(te(O(L,ut),O(F,ut),O(_,(S,D)=>S&&S.column===D.column&&S.row===D.row),O(c)),R(([S,D,Z,re])=>({gap:Z,item:D,scrollTop:re,viewport:S}))),ne),k(x(te(O(f),n,O(_,mr),O(F,ut),O(L,ut),O(B),O(C),O(xe),O(ue),O(ve)),M(([,,,,,,,S])=>!S),R(([S,[D,Z],re,Q,Oe,Ke,De,,lt,ye])=>{const{column:ze,row:Ye}=re,{height:st,width:wt}=Q,{width:$t}=Oe;if(De===0&&(S===0||$t===0))return uo;if(wt===0){const Yt=At(ye,S),Xo=Yt+Math.max(De-1,0);return hr(mo(Yt,Xo,Ke))}const ct=qo($t,wt,ze);let Ne,We;lt?D===0&&Z===0&&De>0?(Ne=0,We=De-1):(Ne=ct*pt((D+Ye)/(st+Ye)),We=ct*fo((Z+Ye)/(st+Ye))-1,We=yt(S-1,Ze(We,ct-1)),Ne=yt(We,Ze(0,Ne))):(Ne=0,We=-1);const _t=mo(Ne,We,Ke),{bottom:Ut,top:qt}=go(Oe,re,Q,_t),Kt=fo(S/ct),Yo=Kt*st+(Kt-1)*Ye-Ut;return{bottom:Ut,itemHeight:st,items:_t,itemWidth:wt,offsetBottom:Yo,offsetTop:qt,top:qt}})),y),k(x(B,M(S=>S!==null),R(S=>S.length)),f),k(x(te(L,F,y,_),M(([S,D,{items:Z}])=>Z.length>0&&D.height!==0&&S.height!==0),R(([S,D,{items:Z},re])=>{const{bottom:Q,top:Oe}=go(S,re,D,Z);return[Oe,Q]}),Y(et)),t);const Ie=T(!1);k(x(c,G(Ie),R(([S,D])=>D||S!==0)),Ie);const qe=he(x(te(y,f),M(([{items:S}])=>S.length>0),G(Ie),M(([[S,D],Z])=>{const re=S.items[S.items.length-1].index===D-1;return(Z||S.bottom>0&&S.itemHeight>0&&S.offsetBottom===0&&S.items.length===D)&&re}),R(([[,S]])=>S-1),Y())),Ge=he(x(O(y),M(({items:S})=>S.length>0&&S[0].index===0),we(0),Y())),Se=he(x(O(y),G(xe),M(([{items:S},D])=>S.length>0&&!D),R(([{items:S}])=>({endIndex:S[S.length-1].index,startIndex:S[0].index})),Y(Ro),Ee(0)));k(Se,p.scrollSeekRangeChanged),k(x(P,G(L,F,f,_),R(([S,D,Z,re,Q])=>{const Oe=ko(S),{align:Ke,behavior:De,offset:lt}=Oe;let ye=Oe.index;ye==="LAST"&&(ye=re-1),ye=Ze(0,ye,yt(re-1,ye));let ze=Lt(D,Q,Z,ye);return Ke==="end"?ze=ho(ze-D.height+Z.height):Ke==="center"&&(ze=ho(ze-D.height/2+Z.height/2)),lt&&(ze+=lt),{behavior:De,top:ze}})),a);const Re=se(x(y,R(S=>S.offsetBottom+S.bottom)),0);return k(x(z,R(S=>({height:S.visibleHeight,width:S.visibleWidth}))),L),{customScrollParent:m,data:B,deviation:K,footerHeight:r,gap:_,headerHeight:i,increaseViewportBy:e,initialItemCount:C,itemDimensions:F,overscan:o,restoreStateFrom:me,scrollBy:l,scrollContainerState:s,scrollHeight:$,scrollTo:a,scrollToIndex:P,scrollTop:c,smoothScrollTargetReached:h,totalCount:f,useWindowScroll:d,viewportDimensions:L,windowScrollContainerState:u,windowScrollTo:w,windowViewportRect:z,...p,gridState:y,horizontalDirection:Me,initialTopMostItemIndex:ve,totalListHeight:Re,...g,endReached:qe,propsReady:b,rangeChanged:Se,startReached:Ge,stateChanged:ne,stateRestoreInProgress:xe,...I}},X(Gt,ae,it,Oo,Fe,Dt,Le));function qo(e,t,o){return Ze(1,pt((e+o)/(pt(t)+o)))}function go(e,t,o,n){const{height:r}=o;if(r===void 0||n.length===0)return{bottom:0,top:0};const i=Lt(e,t,o,n[0].index);return{bottom:Lt(e,t,o,n[n.length-1].index)+r,top:i}}function Lt(e,t,o,n){const r=qo(e.width,o.width,t.column),i=pt(n/r),l=i*o.height+Ze(0,i-1)*t.row;return l>0?l+t.row:l}const pr=V(()=>{const e=T(v=>`Item ${v}`),t=T({}),o=T(null),n=T("virtuoso-grid-item"),r=T("virtuoso-grid-list"),i=T(Nt),l=T("div"),s=T(Ue),a=(v,g=null)=>se(x(t,R(p=>p[v]),Y()),g),c=T(!1),h=T(!1);return k(O(h),c),{components:t,computeItemKey:i,context:o,FooterComponent:a("Footer"),HeaderComponent:a("Header"),headerFooterTag:l,itemClassName:n,ItemComponent:a("Item","div"),itemContent:e,listClassName:r,ListComponent:a("List","div"),readyStateChanged:c,reportReadyState:h,ScrollerComponent:a("Scroller","div"),scrollerRef:s,ScrollSeekPlaceholder:a("ScrollSeekPlaceholder","div")}}),xr=V(([e,t])=>({...e,...t}),X(gr,pr)),vr=E.memo(function(){const e=J("gridState"),t=J("listClassName"),o=J("itemClassName"),n=J("itemContent"),r=J("computeItemKey"),i=J("isSeeking"),l=pe("scrollHeight"),s=J("ItemComponent"),a=J("ListComponent"),c=J("ScrollSeekPlaceholder"),h=J("context"),v=pe("itemDimensions"),g=pe("gap"),p=J("log"),H=J("stateRestoreInProgress"),b=pe("reportReadyState"),m=Pe(E.useMemo(()=>d=>{const u=d.parentElement.parentElement.scrollHeight;l(u);const w=d.firstChild;if(w){const{height:z,width:I}=w.getBoundingClientRect();v({height:z,width:I})}g({column:po("column-gap",getComputedStyle(d).columnGap,p),row:po("row-gap",getComputedStyle(d).rowGap,p)})},[l,v,g,p]),!0,!1);return Do(()=>{e.itemHeight>0&&e.itemWidth>0&&b(!0)},[e]),H?null:j.jsx(a,{className:t,ref:m,...ie(a,h),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(d=>{const u=r(d.index,d.data,h);return i?j.jsx(c,{...ie(c,h),height:e.itemHeight,index:d.index,width:e.itemWidth},u):le.createElement(s,{...ie(s,h),className:o,"data-index":d.index,key:u},n(d.index,d.data,h))})})}),Ir=E.memo(function(){const e=J("HeaderComponent"),t=pe("headerHeight"),o=J("headerFooterTag"),n=Pe(E.useMemo(()=>i=>{t(Be(i,"height"))},[t]),!0,!1),r=J("context");return e?j.jsx(o,{ref:n,children:j.jsx(e,{...ie(e,r)})}):null}),Tr=E.memo(function(){const e=J("FooterComponent"),t=pe("footerHeight"),o=J("headerFooterTag"),n=Pe(E.useMemo(()=>i=>{t(Be(i,"height"))},[t]),!0,!1),r=J("context");return e?j.jsx(o,{ref:n,children:j.jsx(e,{...ie(e,r)})}):null}),Sr=({children:e})=>{const t=E.useContext(Go),o=pe("itemDimensions"),n=pe("viewportDimensions"),r=Pe(E.useMemo(()=>i=>{n(i.getBoundingClientRect())},[n]),!0,!1);return E.useEffect(()=>{t&&(n({height:t.viewportHeight,width:t.viewportWidth}),o({height:t.itemHeight,width:t.itemWidth}))},[t,n,o]),j.jsx("div",{ref:r,style:St(!1),children:e})},wr=({children:e})=>{const t=E.useContext(Go),o=pe("windowViewportRect"),n=pe("itemDimensions"),r=J("customScrollParent"),i=To(o,r,!1);return E.useEffect(()=>{t&&(n({height:t.itemHeight,width:t.itemWidth}),o({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,o,n]),j.jsx("div",{ref:i,style:St(!1),children:e})},Cr=E.memo(function({...e}){const t=J("useWindowScroll"),o=J("customScrollParent"),n=o||t?Hr:br,r=o||t?wr:Sr,i=J("context");return j.jsx(n,{...e,...ie(n,i),children:j.jsxs(r,{children:[j.jsx(Ir,{}),j.jsx(vr,{}),j.jsx(Tr,{})]})})}),{useEmitter:Ko,useEmitterValue:J,usePublisher:pe}=Po(xr,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},Cr),br=_o({useEmitter:Ko,useEmitterValue:J,usePublisher:pe}),Hr=Uo({useEmitter:Ko,useEmitterValue:J,usePublisher:pe});function po(e,t,o){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&o(`${e} was not resolved to pixel value correctly`,t,de.WARN),t==="normal"?0:parseInt(t??"0",10)}function Rr(e){const t=/^\u001b\[([;0-9]*)m$/,o={isSelectGraphicRendition:!1,escapeCode:e},n=t.exec(e);if(n){o.isSelectGraphicRendition=!0,o.setFG=!1,o.setBG=!1,o.resetFG=!1,o.resetBG=!1;const r=(n[1]||"").split(";").map(i=>parseInt(i||"0"));for(const i of r)i>=30&&i<=37?o.setFG=i-30:i>=40&&i<=47?o.setBG=i-40:((i===38||i===0)&&(o.resetFG=!0,o.setFG=!1),(i===48||i===0)&&(o.resetBG=!0,o.setBG=!1))}return o}function yr(e){if(typeof e!="string")return[];const t=e.length;if(t===0)return[];let o=0,n=0,r=0,i=0,l=0;const s=[];for(;o<t&&(n=e.indexOf("\x1B",o),n!==-1);){if(i=e.indexOf("<!--",o),l=e.indexOf("-->",i),l!==-1&&(l+=3),n>i&&n<l){o=l;continue}n>o&&(s.push(e.substring(o,n)),o=n),n+=2;let a=e.charCodeAt(n);for(;n<t&&(a<64||a>126);)n++,a=e.charCodeAt(n);const c=Rr(e.substring(o,n+1));s.push(c),o=n+1,r=o}return r<t&&s.push(e.substr(r)),s}function zr(e,t){const o=[];let n={setFG:!1,setBG:!1};for(let r=0;r<e.length;r++){const i=e[r];if(typeof i=="string")if(!n.setFG&&!n.setBG)o.push(j.jsx("div",{dangerouslySetInnerHTML:{__html:i}},`${t}-${r}`));else{const l=[];typeof n.setFG=="number"&&l.push(`ansi-fg-${n.setFG}`),typeof n.setBG=="number"&&l.push(`ansi-bg-${n.setBG}`),o.push(j.jsx("span",{className:l.join(" "),children:i}))}else if(i.isSelectGraphicRendition){const l={...n};i.resetFG&&(l.setFG=!1),i.resetBG&&(l.setBG=!1),typeof i.setFG=="number"&&(l.setFG=i.setFG),typeof i.setBG=="number"&&(l.setBG=i.setBG),n=l}}return o}const Er=e=>{const t=le.useRef(null);return le.useEffect(()=>{const o=t.current?t.current.getBoundingClientRect().height:0;e.heightCallback(o),window.Behaviour.applySubtree(document.getElementById(`${e.stepId}-${e.lineNumber}`))},[]),j.jsxs("pre",{style:{background:"none",border:"none"},className:"console-output-line",children:[j.jsx("div",{className:"console-output-line-anchor",id:`log-${e.lineNumber}`},`${e.lineNumber}-anchor`),j.jsxs("div",{className:"console-output-line",ref:t,children:[j.jsx("a",{className:"console-line-number",href:`?start-byte=${e.startByte}&selected-node=${e.stepId}#log-${e.lineNumber}`,style:{width:Math.max(9*String(e.lineNumber).length,30)+"px"},children:e.lineNumber}),j.jsx("div",{id:`${e.stepId}-${e.lineNumber}`,className:"console-text",children:zr(yr(e.content),`${e.stepId}-${e.lineNumber}`)})]},`${e.lineNumber}-body`)]},`console-line-pre${e.lineNumber}`)};function Lr(e){const t=le.useRef(null),o=le.useRef(null),[n,r]=le.useState(!1),[i,l]=le.useState(1);le.useEffect(()=>()=>{t.current&&clearInterval(t.current)},[]),le.useEffect(()=>{n&&e.logBuffer.lines.length>0&&o.current&&e.logBuffer.lines&&requestAnimationFrame(()=>{const c=document.documentElement.scrollHeight;window.scrollTo({top:c})})},[e.logBuffer.lines]),le.useEffect(()=>{const c=()=>{const h=window.scrollY+window.innerHeight,g=document.body.scrollHeight-h<300;r(g)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]),le.useEffect(()=>{n&&a()?t.current||(t.current=setInterval(()=>{e.onMoreConsoleClick(e.step.id,e.logBuffer.startByte)},1e3)):t.current&&(clearInterval(t.current),t.current=null)},[n,e.step,e.logBuffer]);const s=le.useCallback(c=>{(c>i||i===1)&&l(c)},[i]),a=()=>e.step.state===Zo.running||e.logBuffer.startByte<0;return le.useEffect(()=>{const c=window.location.hash;if(!c.startsWith("#log-"))return;const h=parseInt(c.substring(5));!isNaN(h)&&o.current&&o.current.scrollToIndex({index:h,align:"center"})},[]),j.jsx(ur,{useWindowScroll:!0,ref:o,data:e.logBuffer.lines,role:"log",itemContent:(c,h)=>j.jsx(Er,{lineNumber:String(c),content:h,stepId:e.step.id,startByte:e.logBuffer.startByte,heightCallback:s})})}export{Lr as default};
//# sourceMappingURL=ConsoleLogStream-DBFhBGsF.js.map
